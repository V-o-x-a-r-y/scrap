chrome.runtime.onMessage.addListener(function(e,r,i){"saveZip"===e.action&&saveZipToDisk(e.zipData)});function saveZipToDisk(e){chrome.fileSystem.chooseEntry({type:"saveFile",suggestedName:"images.zip"},function(r){if(chrome.runtime.lastError){console.error(chrome.runtime.lastError.message);return}r.createWriter(function(r){r.onwriteend=function(e){console.log("Archive ZIP enregistr\xe9e avec succ\xe8s.")},r.onerror=function(e){console.error("Erreur lors de l'enregistrement de l'archive ZIP :",e)},r.write(new Blob([e]))},function(e){console.error("Erreur lors de la cr\xe9ation du writer pour l'archive ZIP :",e)})})}